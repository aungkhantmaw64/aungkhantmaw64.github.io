+++
date = '2025-10-12T15:19:48+07:00'
draft = false
title = 'Hardware Design - Build-Up, Stack-Up, and Controlled Impedance'
tags = ["Printed Circuit Board", "Build-up", "Stack-up", "Controlled Impedance"]
categories = ["hardware", "C/C++"]
thumbnail = "images/multi-layered-cake.jpg"
+++

_PCB Tips and Tricks_

## <!--more-->

## Build-Up

- the physical definitions of layer in the PCB (materials, thickness), number of layers, total thickness.
- Copper foils, prepregs and cores (dielectrics)
- Via types and sizing
- Soldermask, Surface Finish, ...
- Need to work closely with manufacturer
- Need to be decided on before and during the PCB design stage!
- Dielectric constant may vary based on the frequency of your design

  Why is it important for a PCB designer though?

- Influence how you route your system
- Recommended build-ups depending on needs (layer count, Controlled impedance, available materials, ..)
- Copper thickness may depend on the total PCB thickness, current/power-handling requirements, cost, ..
- Dielectric material influence controlled impedance
  - Pre-preg
  - Core

## Stack-Up

- the assignment of layer types (SIG, GND, PWR) in the PCB.
- concerned with SI and EMI performance, as well as power delivery

Questions to asks:

- What max. layer count is available to us?
- How many of thosse should be routing layers?
- How many of those should be power layers?

### Stack-up Rules

- 1 x GND plane closely adjacent to every PWR layer
- 1 x GND plane closely adjacent to every SIG layer
- Closely-spaced PWR and GND layers give low-inductance power delivery
- No routing on GND layers.
- Avoid adjacent signal layers
- Inner signal layers (stripline) for high-speed signals

Other ideas:

- Multiple GNDs, copper fills, and stitching vias
- balanced construction
- PWR adjacent to SIG
- Increasing the layer count
- Changing reference layers

## Controlled Impedance

- Sizing and routing traces and planes 'appropriately'
- Matching driver impedance to trace impedance

## References

- Controlled Impedance Calculator - <https://www.multi-circuit-boards.eu/en/pcb-design-aid/impedance-calculation.html>
- Phil's Lab PCB Design for EMI & SI - <https://www.youtube.com/watch?v=VtzPL8wQ8-E>
- What your Differential Pairs Wish You Knew - <https://www.youtube.com/watch?v=QG0Apol-oj0>
